# gomoku

软件工程AI辅助编程作业

# 五子棋游戏

基于Python和Pygame开发的五子棋游戏，支持人人对战、人机对战、历史记录和棋谱回放功能。

## 环境配置指南

### 系统要求

- Python 3.6+
- Pygame 2.0+

### 安装步骤

1. 安装Python（如果尚未安装）：

   - 从[Python官网](https://www.python.org/downloads/)下载安装最新版本
2. 安装所需的依赖库：

   ```bash
   pip install pygame
   ```
3. 下载游戏代码：

   ```bash
   git clone https://github.com/skoyhs/gomoku.git
   # 或直接下载ZIP文件并解压
   ```
4. 运行游戏：

   ```bash
   cd gomoku
   python main.py
   ```

### 文件结构

- `main.py` - 主程序和界面实现
- `game.py` - 游戏逻辑核心
- `board.py` - 棋盘实现
- `sgf.py` - 棋谱保存和加载功能
- `ai.py` - AI算法实现
- `history/` - 保存历史棋谱的目录

## 功能操作手册

### 基本操作

- **开始新游戏**：点击"重新开始"按钮
- **落子**：在棋盘空位处点击鼠标
- **悔棋**：点击"悔棋"按钮撤销最后一步（或人机对战中的最后两步）
- **认输**：点击"认输"按钮结束当前对局

### 人人对战

1. 启动游戏后默认为人人对战模式
2. 黑白双方轮流落子
3. 先形成五连子的一方获胜

### 人机对战

1. 点击"人机对战"按钮
2. 选择AI难度级别：
   - **初级**：随机落子
   - **中级**：基于模式匹配的智能落子
   - **高级**：使用Minimax + Alpha-Beta剪枝算法
3. 玩家执黑先行，AI执白后行
4. AI思考时会显示"AI思考中..."状态

### 历史记录功能

1. 点击"历史记录"按钮进入历史记录界面
2. 查看之前的对局记录列表
3. 点击任意记录进入棋谱回放模式

### 棋谱回放功能

1. 在回放模式下，可以：
   - 点击"上一步"回到前一步
   - 点击"下一步"前进一步
   - 点击"自动播放"自动播放整盘棋
   - 点击"暂停播放"暂停自动播放
2. 点击"返回"回到历史记录列表

## 关键实现细节

### 游戏规则

- 15×15标准五子棋盘
- 黑方先行，双方轮流落子
- 任意一方形成五连子即获胜

### AI算法实现

1. **初级AI**：

   - 使用随机算法选择空位落子
   - 最简单的AI级别，适合初学者
2. **中级AI**：

   - 使用模式匹配算法
   - 能识别基本棋形（连五、活四、冲四、活三等）
   - 会进行简单的攻防决策
3. **高级AI**：

   - 使用Minimax算法 + Alpha-Beta剪枝
   - 搜索深度优化
   - 启发式评估函数，优先考虑有威胁的位置
   - 使用置换表避免重复计算
   - 基于距离的候选位置筛选

### 棋谱保存与加载

- 使用SGF(Smart Game Format)标准格式保存棋谱
- 棋谱包含对局日期、对局双方、结果等基本信息
- 自动保存完成的对局

## 已知问题与改进方向

### 已知问题

- 高级AI在复杂局面下思考时间可能较长
- 历史记录在数量较多时可能加载速度较慢
- 某些非标准屏幕分辨率下界面可能显示异常

### 改进方向

1. **性能优化**：

   - 优化高级AI的算法效率
   - 使用多线程处理AI思考，避免界面卡顿
   - 改进棋谱加载机制
2. **功能扩展**：

   - 增加网络对战功能
   - 添加更多自定义选项（如棋盘大小、先后手选择）
   - 实现AI自学习功能
3. **界面优化**：

   - 美化游戏界面
   - 添加音效和动画
   - 支持更多语言和主题
4. **其他**：

   - 增加游戏教程
   - 实现棋谱分析功能
   - 添加排行榜系统

## 贡献与反馈

欢迎通过以下方式贡献代码或提出建议：

- 提交Issue
- 发起Pull Request
- 联系开发者：[sunk1218@163.com](mailto:sunk1218@163.com)

## 许可证

本项目使用MIT许可证 - 详见LICENSE文件
